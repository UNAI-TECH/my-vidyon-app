@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Core palette - Professional ERP */
    --background: 46 66% 83%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Primary - Coppery Yellow #FAB75A */
    --primary: 36 92% 67%;
    --primary-foreground: 222 47% 11%;

    /* Secondary - Slate gray */
    --secondary: 215 20% 95%;
    --secondary-foreground: 222 47% 11%;

    --muted: 215 20% 94%;
    --muted-foreground: 215 16% 47%;

    --accent: 36 92% 95%;
    --accent-foreground: 36 92% 67%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 36 92% 67%;

    --radius: 0.5rem;

    /* Sidebar - New Brand Color #FAB75A */
    --sidebar-background: 36 92% 67%;
    --sidebar-foreground: 0 0% 0%;
    --sidebar-primary: 0 0% 0%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 36 92% 60%;
    --sidebar-accent-foreground: 0 0% 0%;
    --sidebar-border: 350 85% 38%;
    --sidebar-ring: 0 0% 0%;
    --sidebar-muted: 0 0% 0%;

    /* Status colors */
    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;

    /* Role-specific accents - All #FAB75A */
    --student: 36 92% 67%;
    --faculty: 36 92% 67%;
    --institution: 36 92% 67%;
    --admin: 36 92% 67%;

    /* Chart colors - Yellow themes */
    --chart-1: 36 92% 67%;
    --chart-2: 0 60% 45%;
    --chart-3: 0 50% 55%;
    --chart-4: 0 80% 30%;
    --chart-5: 0 45% 65%;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 hsl(222 47% 11% / 0.05);
    --shadow-md: 0 4px 6px -1px hsl(222 47% 11% / 0.1), 0 2px 4px -2px hsl(222 47% 11% / 0.1);
    --shadow-lg: 0 10px 15px -3px hsl(222 47% 11% / 0.1), 0 4px 6px -4px hsl(222 47% 11% / 0.1);
    --shadow-card: 0 1px 3px 0 hsl(222 47% 11% / 0.08), 0 1px 2px -1px hsl(222 47% 11% / 0.08);
  }

  .dark {
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 9%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 9%;
    --popover-foreground: 210 40% 98%;

    --primary: 0 65% 52%;
    --primary-foreground: 0 0% 100%;

    --secondary: 222 30% 18%;
    --secondary-foreground: 210 40% 98%;

    --muted: 222 30% 15%;
    --muted-foreground: 215 20% 65%;

    --accent: 222 30% 18%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62% 45%;
    --destructive-foreground: 210 40% 98%;

    --border: 222 30% 18%;
    --input: 222 30% 18%;
    --ring: 0 65% 52%;

    --sidebar-background: 222 47% 6%;
    --sidebar-foreground: 210 40% 96%;
    --sidebar-primary: 0 65% 52%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 222 30% 12%;
    --sidebar-accent-foreground: 210 40% 96%;
    --sidebar-border: 222 30% 15%;
    --sidebar-ring: 0 65% 52%;
    --sidebar-muted: 215 16% 57%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    overflow-wrap: break-word;
    /* Prevent long text from overflowing */
    word-break: break-word;
    /* Ensure aggressive breaking for mobile */
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }
}

@layer components {
  .dashboard-card {
    @apply bg-card rounded-lg border border-border p-4 sm:p-6 shadow-card transition-all duration-200 hover:shadow-md;
  }

  .stat-card {
    @apply dashboard-card flex flex-col gap-2;
  }

  .nav-link {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-lg text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent transition-colors;
  }

  .nav-link-active {
    @apply bg-black/10 text-black font-bold shadow-sm;
  }

  .page-header {
    @apply mb-8;
  }

  .page-title {
    @apply text-2xl font-semibold text-foreground;
  }

  .page-subtitle {
    @apply text-muted-foreground mt-1;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-lg font-medium transition-colors;
  }

  .badge-success {
    @apply bg-success/10 text-success px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-warning {
    @apply bg-warning/10 text-warning px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-info {
    @apply bg-info/10 text-info px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-destructive {
    @apply bg-destructive/10 text-destructive px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .table-header {
    @apply text-left text-xs font-medium text-muted-foreground uppercase tracking-wider;
  }

  .table-cell {
    @apply py-4 px-4 text-sm;
  }

  .input-field {
    @apply w-full px-3 py-2 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all;
  }
}

@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  .animate-slide-up {
    animation: slideUp 0.4s ease-out;
  }

  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(-10px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .bg-sidebar-gradient {
    background: #FAB75A;
    --sidebar-foreground: 0 0% 0%;
    --sidebar-muted: 0 0% 20%;
    --sidebar-accent: 36 92% 60%;
  }

  /* ========================================
     MOBILE-FIRST RESPONSIVE UTILITIES
     ======================================== */

  /* Touch-Friendly Tap Targets - minimum 44x44px for accessibility */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  .touch-target-sm {
    @apply min-h-[36px] min-w-[36px];
  }

  /* Responsive Text Sizes */
  .text-responsive-xs {
    @apply text-xs sm:text-sm;
  }

  .text-responsive-sm {
    @apply text-sm sm:text-base;
  }

  .text-responsive-base {
    @apply text-base sm:text-lg;
  }

  .text-responsive-lg {
    @apply text-lg sm:text-xl md:text-2xl;
  }

  .text-responsive-xl {
    @apply text-xl sm:text-2xl md:text-3xl;
  }

  .text-responsive-2xl {
    @apply text-2xl sm:text-3xl md:text-4xl;
  }

  /* Responsive Spacing */
  .p-responsive {
    @apply p-3 sm:p-4 md:p-6;
  }

  .px-responsive {
    @apply px-3 sm:px-4 md:px-6;
  }

  .py-responsive {
    @apply py-3 sm:py-4 md:py-6;
  }

  .gap-responsive {
    @apply gap-3 sm:gap-4 md:gap-6;
  }

  .mb-responsive {
    @apply mb-4 sm:mb-6 md:mb-8;
  }

  /* Safe Area Padding for Notched Devices */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Dynamic Viewport Height - Handles mobile browser UI properly */
  .h-dvh {
    height: 100dvh;
  }

  .min-h-dvh {
    min-height: 100dvh;
  }

  .max-h-dvh {
    max-height: 100dvh;
  }

  /* Responsive Container - No horizontal overflow */
  .responsive-container {
    @apply w-full max-w-full overflow-x-hidden px-4 sm:px-6 lg:px-8;
  }

  /* Full Width - Breakout of container */
  .full-width-mobile {
    @apply -mx-4 sm:mx-0;
  }


  /* Hide scrollbar but allow scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Smooth scrolling for touch */
  .scroll-smooth-touch {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Prevent text selection on touch (for buttons/cards) */
  .no-select {
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* Active state for touch devices */
  .touch-active {
    @apply active:scale-[0.98] active:opacity-90 transition-transform;
  }
}

/* ========================================
   RESPONSIVE TABLE STYLES
   ======================================== */

/* Wrapper for horizontal scrolling tables on mobile */
.table-responsive-wrapper {
  @apply w-full overflow-x-auto -mx-3 px-3 sm:mx-0 sm:px-0;
  -webkit-overflow-scrolling: touch;
}

/* Mobile card view for tables */
@media (max-width: 640px) {
  .table-mobile-cards {
    @apply block;
  }

  .table-mobile-cards thead {
    @apply sr-only;
  }

  .table-mobile-cards tbody {
    @apply block space-y-4;
    /* Increased spacing between cards */
  }

  .table-mobile-cards tr {
    @apply block bg-card rounded-lg border border-border p-4 shadow-sm;
    @apply relative overflow-hidden;
    /* Contain overflows */
  }

  .table-mobile-cards td {
    @apply block py-2 px-0 text-sm border-0;
    @apply flex items-start justify-between gap-3;
    /* Flex layout for label and value */
  }

  .table-mobile-cards td::before {
    content: attr(data-label);
    @apply font-medium text-muted-foreground shrink-0 w-32;
    /* Fixed width for labels */
    @apply text-xs uppercase tracking-wide;
  }

  /* The Content part of the cell */
  .table-mobile-cards td>* {
    @apply text-right flex-1 break-words min-w-0;
    /* Align right, break words */
  }

  /* Generic fallback if direct text is used in td */
  .table-mobile-cards td:not(:has(*)) {
    @apply text-right flex-1 break-words min-w-0;
  }

  .table-mobile-cards td:last-child {
    @apply pt-4 mt-2 border-t border-border w-full block;
    @apply flex-col items-center gap-2;
    /* Actions usually full width or centered */
  }

  .table-mobile-cards td:last-child::before {
    display: none;
    /* Hide label for actions row usually */
  }
}

/* ========================================
   RESPONSIVE FORM STYLES
   ======================================== */

/* Form grid that stacks on mobile */
.form-grid {
  @apply grid grid-cols-1 sm:grid-cols-2 gap-4;
}

.form-grid-3 {
  @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4;
}

/* Full width form field */
.form-field-full {
  @apply col-span-1 sm:col-span-2;
}

/* Responsive form actions */
.form-actions {
  @apply flex flex-col-reverse sm:flex-row gap-3 mt-6;
}

.form-actions>button {
  @apply w-full sm:w-auto;
}

/* ========================================
   RESPONSIVE CARD GRID STYLES
   ======================================== */

.card-grid {
  @apply grid grid-cols-1 gap-4;
}

.card-grid-2 {
  @apply grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6;
}

.card-grid-3 {
  @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6;
}

.card-grid-4 {
  @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6;
}

/* Stat cards specific grid */
.stats-grid {
  @apply grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6;
}

/* ========================================
   RESPONSIVE DASHBOARD CARD STYLES
   ======================================== */

.dashboard-card-responsive {
  @apply bg-card rounded-lg border border-border p-4 sm:p-6 shadow-card transition-all duration-200 hover:shadow-md;
}

/* ========================================
   RESPONSIVE MODAL/DIALOG STYLES
   ======================================== */

.dialog-responsive {
  @apply w-[calc(100vw-2rem)] max-w-lg sm:w-full;
}

.dialog-responsive-lg {
  @apply w-[calc(100vw-2rem)] max-w-2xl sm:w-full;
}

.dialog-responsive-xl {
  @apply w-[calc(100vw-2rem)] max-w-4xl sm:w-full;
}

/* ========================================
   RESPONSIVE BUTTON STYLES
   ======================================== */

/* Mobile full-width button that becomes auto-width on larger screens */
.btn-responsive {
  @apply w-full sm:w-auto;
}

/* Button group that stacks on mobile */
.btn-group-responsive {
  @apply flex flex-col sm:flex-row gap-2 sm:gap-3;
}

.btn-group-responsive>button,
.btn-group-responsive>a {
  @apply w-full sm:w-auto;
}

/* ========================================
   RESPONSIVE TAB STYLES
   ======================================== */

/* Scrollable tabs on mobile */
.tabs-scrollable {
  @apply flex overflow-x-auto scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0 sm:flex-wrap;
  -webkit-overflow-scrolling: touch;
}

.tabs-scrollable>* {
  @apply flex-shrink-0;
}

/* ========================================
   RESPONSIVE CHART CONTAINER
   ======================================== */

.chart-container-responsive {
  @apply w-full min-h-[200px] sm:min-h-[250px] md:min-h-[300px];
}

/* ========================================
   TOUCH-FRIENDLY INTERACTIVE ELEMENTS
   ======================================== */

/* Enhanced touch feedback */
@media (hover: none) and (pointer: coarse) {

  /* Larger touch targets on mobile for common interactive elements */
  button,
  [role="button"],
  a,
  input[type="checkbox"],
  input[type="radio"] {
    @apply min-h-[36px] min-w-[36px];
  }
}

/* ========================================
   RESPONSIVE HIDE/SHOW UTILITIES
   ======================================== */

.mobile-only {
  @apply block sm:hidden;
}

.tablet-up {
  @apply hidden sm:block;
}

.desktop-only {
  @apply hidden lg:block;
}

.mobile-hide {
  @apply hidden sm:block;
}

/* ========================================
   RESPONSIVE LAYOUT CONTAINERS
   ======================================== */

.container-responsive {
  @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
}

/* Two column layout that stacks on mobile */
.layout-two-col {
  @apply grid grid-cols-1 lg:grid-cols-3 gap-6;
}

.layout-two-col-main {
  @apply lg:col-span-2;
}

.layout-two-col-sidebar {
  @apply lg:col-span-1;
}

/* ========================================
   FIXES FOR COMMON MOBILE ISSUES
   ======================================== */

/* Prevent horizontal scroll on body */
html,
body {
  overflow-x: hidden;
  max-width: 100vw;
  max-width: 100dvw;
  /* Use dynamic viewport width if supported */
}

/* Ensure root element prevents overflow */
#root {
  overflow-x: hidden;
  max-width: 100vw;
  max-width: 100dvw;
}

/* Fix for iOS input zoom */
@media screen and (max-width: 640px) {

  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* Bottom navigation safe area on iOS */
.bottom-nav-safe {
  padding-bottom: max(1rem, env(safe-area-inset-bottom));
}